import{a as L,S as G,N as $,P,K as oe,i as ne,A as se}from"./assets/vendor-DwraIAnb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const v="https://books-backend.p.goit.global/books";async function re(){try{const e=await L.get(`${v}/category-list`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні категорій:",e),[]}}async function N(){try{const e=await L.get(`${v}/top-books`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні топу книг:",e),[]}}async function ae(e){try{const t=await L.get(`${v}/category`,{params:{category:e}});return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні книг за категорією:",t),[]}}async function ie(e){try{const t=await L.get(`${v}/${e}`);return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні інформації про книгу книги:",t),null}}const le=document.querySelector(".burger-btn"),S=document.querySelector(".mobile-menu"),ce=document.querySelector(".close-btn"),de=document.querySelectorAll(".mobile-nav-link");le.addEventListener("click",()=>{S.classList.add("is-open"),document.body.style.overflow="hidden"});ce.addEventListener("click",()=>{S.classList.remove("is-open"),document.body.style.overflow=""});de.forEach(e=>{e.addEventListener("click",()=>{S.classList.remove("is-open"),document.body.style.overflow=""})});const ue=[{alt:"A book, sweater and a cup",mob:new URL("/GreatLoom/assets/slide-1-mob-Cc6zvtrp.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-1-mob@2x-C1Cua2dF.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-1-tab-B-iawSTV.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-1-tab@2x-BDrlqYgA.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-1-desck-B8PASKW_.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-1-desck@2x-DQD8wfpB.jpg",import.meta.url).href},{alt:"A book and glasses",mob:new URL("/GreatLoom/assets/slide-2-mob-DDbJJ4lu.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-2-mob@2x-uw3nuwm-.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-2-tab-90L-xNWz.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-2-tab@2x-BmPtjbdk.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-2-desck-C8ZwBFDl.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-2-desck@2x-ixCL5MHK.jpg",import.meta.url).href},{alt:"Bookshelves with lots of books",mob:new URL("/GreatLoom/assets/slide-3-mob-QYLd9H-Q.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-3-mob@2x-DvJp_sXF.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-3-tab-BSTLpl4t.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-3-tab@2x-DJOgWmei.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-3-desck-DIHVxR5Y.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-3-desck@2x-DBh22Oh4.jpg",import.meta.url).href},{alt:"A vase with flowers in front of white wall",mob:new URL("/GreatLoom/assets/slide-4-mob-BgWQO8Go.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-4-mob@2x-UXlyVfUq.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-4-tab-UGM7yKlF.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-4-tab@2x-r3kyjrid.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-4-desck-DRlw8fXH.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-4-desck@2x-D_brjqpn.jpg",import.meta.url).href}],me=[{subtitle:"Get 10% off your first order"},{subtitle:"Save 15% on some books"},{subtitle:"Summer Sale! Up to -40% discounts"},{subtitle:"Last chance to buy our spring bestsellers"}];function pe(e){const t=document.querySelector("#hero-swiper");if(!t){console.error("[Swiper] Container #hero-swiper not found!");return}const n=e.map(o=>`
        <li class="swiper-slide">
          <picture>
            <source srcset="${o.desk} 1x, ${o.desk2x} 2x" media="(min-width: 1440px)" />
            <source srcset="${o.tab} 1x, ${o.tab2x} 2x" media="(min-width: 768px)" />
            <img src="${o.mob}" srcset="${o.mob2x} 2x" alt="${o.alt}" class="hero-slide-img" loading="lazy" />
          </picture>
        </li>
      `).join("");t.innerHTML=n}function A(){const e=document.querySelector(".swiper-btn.prev"),t=document.querySelector(".swiper-btn.next");!b||!e||!t||(e.disabled=b.isBeginning,t.disabled=b.isEnd,e.classList.toggle("disabled",b.isBeginning),t.classList.toggle("disabled",b.isEnd))}function q(e){const t=document.querySelector(".hero-subtitle");if(!t)return;const n=me[e];n&&(t.textContent=n.subtitle)}let b;window.addEventListener("DOMContentLoaded",()=>{pe(ue);const e=document.querySelector(".swiper-btn.next"),t=document.querySelector(".swiper-btn.prev");requestAnimationFrame(()=>{b=new G(".swiper-gallery",{modules:[$,P],slidesPerView:1,loop:!1,allowTouchMove:!0,wrapperTag:"ul",navigation:{nextEl:e,prevEl:t},on:{init:()=>{A(),q(0)},slideChange:function(){A(),q(this.activeIndex)}}})})});const C=document.getElementById("book-list"),g=document.getElementById("show-more-btn"),O=document.getElementById("showing-count"),x=document.getElementById("total-count"),w=document.querySelectorAll(".book-category-btn");let m=[],f=0,B=!0;function F(){w.forEach(e=>e.disabled=!0)}function _(){w.forEach(e=>e.disabled=!1)}function I(){g.classList.remove("book-visually-hidden")}function R(){g.classList.add("book-visually-hidden")}function T(){const e=B?window.innerWidth<768?10:24:4;m.slice(f,f+e).forEach(n=>{const o=document.createElement("li");o.classList.add("book-card"),o.innerHTML=`
      <img src="${n.book_image}" alt="${n.title}" />
      <div class="book-info">
        <h4 class="book-title">${n.title}</h4>
        <p class="book-author">${n.author}</p>
      </div>
      <p class="book-price">$${n.price??"N/A"}</p>
      <button class="book-learn-btn" data-id="${n._id}">Learn More</button>
    `,C.appendChild(o)}),f+=e,O.textContent=Math.min(f,m.length),f>=m.length&&g.classList.add("book-visually-hidden"),B=!1}async function fe(){R(),T(),I()}async function ge(e){try{g.classList.add("book-visually-hidden");const n=(await N()).find(o=>o.list_name.toLowerCase()===e.toLowerCase());if(!n){C.innerHTML="<p>No books found for this category.</p>",x.textContent=0,O.textContent=0,g.style.display="none";return}m=n.books,x.textContent=m.length,T(),f>=m.length?R():I()}catch(t){console.error("Ошибка при загрузке книг категории:",t)}}async function W(){g.classList.add("book-visually-hidden"),F();const t=(await N()).flatMap(i=>i.books),o=(await re()).map(i=>ae(i.list_name)),a=(await Promise.all(o)).flat(),l=new Map;t.forEach(i=>{l.set(i._id,i)}),a.forEach(i=>{l.has(i._id)||l.set(i._id,i)}),m=Array.from(l.values()),x.textContent=m.length,T(),f>=m.length?R():I(),_()}async function V(e,t=null){if(F(),w.forEach(o=>o.classList.remove("active")),t)t.classList.add("active");else{const o=Array.from(w).find(s=>s.getAttribute("data-category")===e);o&&o.classList.add("active")}dropdownItems.forEach(o=>o.classList.remove("active"));const n=Array.from(dropdownItems).find(o=>o.getAttribute("data-category")===e);n&&(n.classList.add("active"),dropdownText.textContent=n.textContent),C.innerHTML="",f=0,B=!0,e==="all"?await W():(await ge(e),_()),dropdown.classList.remove("open")}w.forEach(e=>{e.addEventListener("click",async()=>{const t=e.getAttribute("data-category");await V(t,e)})});dropdownToggle&&dropdownToggle.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),dropdown.classList.toggle("open")});dropdownItems.length>0&&dropdownItems.forEach(e=>{e.addEventListener("click",async t=>{t.stopPropagation();const n=e.getAttribute("data-category");await V(n)})});document.addEventListener("click",e=>{dropdown&&!dropdown.contains(e.target)&&dropdown.classList.contains("open")&&dropdown.classList.remove("open")});g.addEventListener("click",fe);W();const ye=new G(".feedbacks .swiper",{modules:[$,P,oe],slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".feedbacks .swiper-button-next",prevEl:".feedbacks .swiper-button-prev"},pagination:{el:".feedbacks .swiper-pagination"},keyboard:{enabled:!0}});ye.on("keyPress",(e,t)=>{t===9&&e.slideNext()});const p=document.querySelectorAll(".events-item"),H=document.querySelectorAll(".events-indicator"),z=document.getElementById("prevBtn"),Q=document.getElementById("nextBtn");let d=0,u=0;const J=p.length;function y(){window.innerWidth>=768?(U(),u===0?(p[0].style.display="block",p[1]&&(p[1].style.display="block")):p[2]&&(p[2].style.display="block"),j(u),M(u,1)):(U(),p[d].style.display="block",j(d),M(d,J-1))}function U(){p.forEach(e=>{e.style.display="none"})}function j(e){H.forEach((t,n)=>{n===e?t.classList.add("active"):t.classList.remove("active")})}function M(e,t){z.disabled=e===0,Q.disabled=e===t}function K(){window.innerWidth>=768?u>0&&(u=u-1,y()):d>0&&(d=d-1,y())}function Y(){window.innerWidth>=768?u<1&&(u=u+1,y()):d<J-1&&(d=d+1,y())}function be(e){window.innerWidth>=768?u=e:d=e,y()}z.addEventListener("click",K);Q.addEventListener("click",Y);H.forEach((e,t)=>{e.addEventListener("click",function(){be(t)})});document.addEventListener("keydown",function(e){e.key==="ArrowLeft"&&K(),e.key==="ArrowRight"&&Y()});window.addEventListener("resize",y);document.querySelectorAll(".events-register").forEach(function(e){e.addEventListener("click",function(){const t=this.closest(".events-item").querySelector(".events-name").textContent;he(t)})});function he(e){const t=document.getElementById("contactModal"),n=document.getElementById("modalEventName");n.textContent=e,t.classList.add("active"),document.body.style.overflow="hidden"}function k(){document.getElementById("contactModal").classList.remove("active"),document.body.style.overflow="",document.getElementById("modalForm").reset()}document.getElementById("closeModal").addEventListener("click",k);document.getElementById("contactModal").addEventListener("click",function(e){e.target===this&&k()});document.addEventListener("keydown",function(e){e.key==="Escape"&&k()});document.getElementById("modalForm").addEventListener("submit",function(e){e.preventDefault();const t=new FormData(this),n=t.get("name"),o=t.get("email"),s=t.get("message");console.log("Form submitted:",{name:n,email:o,message:s}),alert("Дякуємо за реєстрацію!"),k()});y();const X=document.querySelector(".sub-form"),we=document.querySelector("#user-email");X.addEventListener("submit",Le);function Le(e){e.preventDefault();const t=we.value.trim();if(!ve(t)){E("error","Invalid Input","Please provide a valid email address");return}const o=ke();if(Ee(o,t)){E("warning","Already Subscribed","This email is already on the list"),D();return}xe(o,t),E("success","Subscribed","You have successfully joined the list"),D()}function ve(e){return/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)}function ke(){const e=localStorage.getItem("subscriptionList");return e?JSON.parse(e):[]}function Ee(e,t){return e.includes(t)}function xe(e,t){e.push(t),localStorage.setItem("subscriptionList",JSON.stringify(e))}function E(e,t,n){ne[e]({title:t,message:n,position:"topRight"})}function D(){X.reset()}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-backdrop"),t=document.getElementById("quantity"),n=document.querySelector(".modal-close");let o=1;if(!e||!t||!n){console.warn("Элементы модалки не найдены");return}document.addEventListener("click",r=>{const c=r.target.closest("[data-id]");if(!c)return;const h=c.dataset.id;h&&a(h)}),e.addEventListener("click",r=>{(r.target.classList.contains("modal-backdrop")||r.target.closest(".modal-close"))&&l()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&l()}),document.addEventListener("click",r=>{r.target.classList.contains("decrement")&&Z(),r.target.classList.contains("increment")&&i(),r.target.classList.contains("add-to-cart")&&ee(),r.target.classList.contains("buy-now")&&te(r)});let s=null;async function a(r){const c=await ie(r);if(!c){console.warn("Нет данных по книге");return}document.getElementById("modal-title").textContent=c.title,document.getElementById("modal-author").textContent=c.author,document.getElementById("modal-price").textContent=`$${c.price}`,document.getElementById("modal-book-image").src=c.book_image,document.getElementById("modal-book-image").alt=c.title,document.getElementById("details-text").textContent=c.description||"No description",document.getElementById("shipping-text").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.getElementById("returns-text").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",t.textContent=1,o=1,e.classList.remove("is-hidden"),document.body.style.overflow="hidden",s&&(s.destroy(),document.querySelectorAll(".ac-panel").forEach(h=>{h.style.height="",h.style.display=""})),s=new se("#accordion",{duration:300,showMultiple:!0,openOnInit:[0]})}function l(){e.classList.add("is-hidden"),document.body.style.overflow="",s&&(s.destroy(),s=null,document.querySelectorAll(".ac-panel").forEach(r=>{r.style.height="",r.style.display=""}))}function i(){o++,t.textContent=o}function Z(){o>1&&(o--,t.textContent=o)}function ee(){console.log(`Додано у корзину: ${o} шт.`)}function te(r){r.preventDefault(),alert("Дякуємо за покупку")}});
//# sourceMappingURL=index.js.map
