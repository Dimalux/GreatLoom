import{a as v,S as O,N as _,P as F,K as V,i as le,A as ce}from"./assets/vendor-DwraIAnb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const E="https://books-backend.p.goit.global/books";async function de(){try{const e=await v.get(`${E}/category-list`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні категорій:",e),[]}}async function W(){try{const e=await v.get(`${E}/top-books`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні топу книг:",e),[]}}async function ue(e){try{const t=await v.get(`${E}/category`,{params:{category:e}});return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні книг за категорією:",t),[]}}async function me(e){try{const t=await v.get(`${E}/${e}`);return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні інформації про книгу книги:",t),null}}const fe=document.querySelector(".burger-btn"),R=document.querySelector(".mobile-menu"),pe=document.querySelector(".close-btn"),ge=document.querySelectorAll(".mobile-nav-link");fe.addEventListener("click",()=>{R.classList.add("is-open"),document.body.style.overflow="hidden"});pe.addEventListener("click",()=>{R.classList.remove("is-open"),document.body.style.overflow=""});ge.forEach(e=>{e.addEventListener("click",()=>{R.classList.remove("is-open"),document.body.style.overflow=""})});const ye=[{alt:"A book, sweater and a cup",mob:new URL("/GreatLoom/assets/slide-1-mob-Cc6zvtrp.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-1-mob@2x-BxLMA4JW.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-1-tab-B-iawSTV.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-1-tab@2x-BDrlqYgA.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-1-desck-B8PASKW_.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-1-desck@2x-DQD8wfpB.jpg",import.meta.url).href},{alt:"A book and glasses",mob:new URL("/GreatLoom/assets/slide-2-mob-DDbJJ4lu.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-2-mob@2x-uw3nuwm-.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-2-tab-90L-xNWz.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-2-tab@2x-BmPtjbdk.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-2-desck-C8ZwBFDl.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-2-desck@2x-ixCL5MHK.jpg",import.meta.url).href},{alt:"Bookshelves with lots of books",mob:new URL("/GreatLoom/assets/slide-3-mob-QYLd9H-Q.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-3-mob@2x-BeBhV7mo.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-3-tab-BSTLpl4t.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-3-tab@2x-DJOgWmei.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-3-desck-DIHVxR5Y.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-3-desck@2x-DBh22Oh4.jpg",import.meta.url).href},{alt:"A vase with flowers in front of white wall",mob:new URL("/GreatLoom/assets/slide-4-mob-BgWQO8Go.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-4-mob@2x-UXlyVfUq.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-4-tab-UGM7yKlF.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-4-tab@2x-r3kyjrid.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-4-desck-DRlw8fXH.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-4-desck@2x-D_brjqpn.jpg",import.meta.url).href}],be=[{subtitle:"Get 10% off your first order"},{subtitle:"Save 15% on some books"},{subtitle:"Summer Sale! Up to -40% discounts"},{subtitle:"Last chance to buy our spring bestsellers"}];function he(e){const t=document.querySelector("#hero-swiper");if(!t){console.error("[Swiper] Container #hero-swiper not found!");return}const n=e.map(o=>`
        <li class="swiper-slide">
          <picture>
            <source srcset="${o.desk} 1x, ${o.desk2x} 2x" media="(min-width: 1440px)" />
            <source srcset="${o.tab} 1x, ${o.tab2x} 2x" media="(min-width: 768px)" />
            <img src="${o.mob}" srcset="${o.mob2x} 2x" alt="${o.alt}" class="hero-slide-img" loading="lazy" />
          </picture>
        </li>
      `).join("");t.innerHTML=n}function A(){const e=document.querySelector(".swiper-btn.prev"),t=document.querySelector(".swiper-btn.next");!b||!e||!t||(e.disabled=b.isBeginning,t.disabled=b.isEnd,e.classList.toggle("disabled",b.isBeginning),t.classList.toggle("disabled",b.isEnd))}function G(e){const t=document.querySelector(".hero-subtitle");if(!t)return;const n=be[e];n&&(t.textContent=n.subtitle)}let b;window.addEventListener("DOMContentLoaded",()=>{he(ye);const e=document.querySelector(".swiper-btn.next"),t=document.querySelector(".swiper-btn.prev");requestAnimationFrame(()=>{b=new O(".swiper-gallery",{modules:[_,F,V],slidesPerView:1,loop:!1,allowTouchMove:!0,wrapperTag:"ul",navigation:{nextEl:e,prevEl:t},keyboard:{enabled:!0,onlyInViewport:!0},on:{init:()=>{A(),G(0)},slideChange:function(){A(),G(this.activeIndex)}}})})});const x=document.getElementById("book-list"),g=document.getElementById("show-more-btn"),H=document.getElementById("showing-count"),I=document.getElementById("total-count"),w=document.getElementById("book-category-selector"),L=document.querySelectorAll(".book-category-btn"),z=document.querySelector(".loader");let f=[],m=0,k=!0;function B(){z.classList.add("book-visually-hidden")}function q(){z.classList.remove("book-visually-hidden")}function we(){w.disabled=!0}function Q(){w.disabled=!1}function J(){L.forEach(e=>e.disabled=!0)}function K(){L.forEach(e=>e.disabled=!1)}function M(){g.classList.remove("book-visually-hidden")}function T(){g.classList.add("book-visually-hidden")}function U(){const e=k?window.innerWidth<768?10:24:4;f.slice(m,m+e).forEach(n=>{const o=document.createElement("li");o.classList.add("book-card"),o.innerHTML=`
      <img class="book-image" src="${n.book_image}" alt="${n.title}" />
      <div class="book-info">
        <div class="book-subinfo">
          <h4 class="book-title">${n.title}</h4>
          <p class="book-author">${n.author}</p>
        </div>
        <p class="book-price">$${n.price??"N/A"}</p>
      </div>
      <button class="book-learn-btn" data-id="${n._id}">Learn More</button>
    `,x.appendChild(o)}),m+=e,H.textContent=Math.min(m,f.length),m>=f.length&&g.classList.add("book-visually-hidden"),k=!1}async function Le(){q(),T(),U(),M(),B()}async function Y(e){try{g.classList.add("book-visually-hidden");const n=(await W()).find(o=>o.list_name.toLowerCase()===e.toLowerCase());if(!n){x.innerHTML="<p>No books found for this category.</p>",I.textContent=0,H.textContent=0,g.style.display="none";return}f=n.books,I.textContent=f.length,U(),m>=f.length?T():M()}catch(t){console.error("Ошибка при загрузке книг категории:",t)}}async function j(){g.classList.add("book-visually-hidden"),we(),J();const t=(await W()).flatMap(i=>i.books),o=(await de()).map(i=>ue(i.list_name)),a=(await Promise.all(o)).flat(),l=new Map;t.forEach(i=>{l.set(i._id,i)}),a.forEach(i=>{l.has(i._id)||l.set(i._id,i)}),f=Array.from(l.values()),I.textContent=f.length,U(),m>=f.length?T():M(),K(),Q(),B()}w.addEventListener("change",async()=>{q();const e=w.value;x.innerHTML="",m=0,k=!0,e==="all"?await j():(await Y(e),Q(),B())});L.forEach(e=>{e.addEventListener("click",async()=>{q();const t=e.getAttribute("data-category");J(),L.forEach(n=>n.classList.remove("active")),e.classList.add("active"),x.innerHTML="",m=0,k=!0,t==="all"?await j():(await Y(t),K(),B())})});g.addEventListener("click",Le);j();const ke=new O(".feedbacks .swiper",{modules:[_,F,V],slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".feedbacks .swiper-button-next",prevEl:".feedbacks .swiper-button-prev"},pagination:{el:".feedbacks .swiper-pagination"},keyboard:{enabled:!0}});ke.on("keyPress",(e,t)=>{t===9&&e.slideNext()});const p=document.querySelectorAll(".events-item"),Z=document.querySelectorAll(".events-indicator"),X=document.getElementById("prevBtn"),ee=document.getElementById("nextBtn");let d=0,u=0;const te=p.length;function y(){window.innerWidth>=768?(D(),u===0?(p[0].style.display="block",p[1]&&(p[1].style.display="block")):p[2]&&(p[2].style.display="block"),$(u),P(u,1)):(D(),p[d].style.display="block",$(d),P(d,te-1))}function D(){p.forEach(e=>{e.style.display="none"})}function $(e){Z.forEach((t,n)=>{n===e?t.classList.add("active"):t.classList.remove("active")})}function P(e,t){X.disabled=e===0,ee.disabled=e===t}function oe(){window.innerWidth>=768?u>0&&(u=u-1,y()):d>0&&(d=d-1,y())}function ne(){window.innerWidth>=768?u<1&&(u=u+1,y()):d<te-1&&(d=d+1,y())}function ve(e){window.innerWidth>=768?u=e:d=e,y()}X.addEventListener("click",oe);ee.addEventListener("click",ne);Z.forEach((e,t)=>{e.addEventListener("click",function(){ve(t)})});document.addEventListener("keydown",function(e){e.key==="ArrowLeft"&&oe(),e.key==="ArrowRight"&&ne()});window.addEventListener("resize",y);document.querySelectorAll(".events-register").forEach(function(e){e.addEventListener("click",function(){const t=this.closest(".events-item").querySelector(".events-name").textContent;Ee(t)})});function Ee(e){const t=document.getElementById("contactModal"),n=document.getElementById("modalEventName");n.textContent=e,t.classList.add("active"),document.body.style.overflow="hidden"}function S(){document.getElementById("contactModal").classList.remove("active"),document.body.style.overflow="",document.getElementById("modalForm").reset()}document.getElementById("closeModal").addEventListener("click",S);document.getElementById("contactModal").addEventListener("click",function(e){e.target===this&&S()});document.addEventListener("keydown",function(e){e.key==="Escape"&&S()});document.getElementById("modalForm").addEventListener("submit",function(e){e.preventDefault();const t=new FormData(this),n=t.get("name"),o=t.get("email"),s=t.get("message");console.log("Form submitted:",{name:n,email:o,message:s}),alert("Дякуємо за реєстрацію!"),S()});y();const se=document.querySelector(".sub-form"),xe=document.querySelector("#user-email");se.addEventListener("submit",Be);function Be(e){e.preventDefault();const t=xe.value.trim();if(!Se(t)){C("error","Invalid Input","Please provide a valid email address");return}const o=Ce();if(Ie(o,t)){C("warning","Already Subscribed","This email is already on the list"),N();return}Re(o,t),C("success","Subscribed","You have successfully joined the list"),N()}function Se(e){return/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)}function Ce(){const e=localStorage.getItem("subscriptionList");return e?JSON.parse(e):[]}function Ie(e,t){return e.includes(t)}function Re(e,t){e.push(t),localStorage.setItem("subscriptionList",JSON.stringify(e))}function C(e,t,n){le[e]({title:t,message:n,position:"topRight"})}function N(){se.reset()}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-backdrop"),t=document.getElementById("quantity"),n=document.querySelector(".modal-close");let o=1;if(!e||!t||!n){console.warn("Элементы модалки не найдены");return}document.addEventListener("click",r=>{const c=r.target.closest("[data-id]");if(!c)return;const h=c.dataset.id;h&&a(h)}),e.addEventListener("click",r=>{(r.target.classList.contains("modal-backdrop")||r.target.closest(".modal-close"))&&l()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&l()}),document.addEventListener("click",r=>{r.target.classList.contains("decrement")&&re(),r.target.classList.contains("increment")&&i(),r.target.classList.contains("add-to-cart")&&ae(),r.target.classList.contains("buy-now")&&ie(r)});let s=null;async function a(r){const c=await me(r);if(!c){console.warn("Нет данных по книге");return}document.getElementById("modal-title").textContent=c.title,document.getElementById("modal-author").textContent=c.author,document.getElementById("modal-price").textContent=`$${c.price}`,document.getElementById("modal-book-image").src=c.book_image,document.getElementById("modal-book-image").alt=c.title,document.getElementById("details-text").textContent=c.description||"No description",document.getElementById("shipping-text").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.getElementById("returns-text").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",t.textContent=1,o=1,e.classList.remove("is-hidden"),document.body.style.overflow="hidden",s&&(s.destroy(),document.querySelectorAll(".ac-panel").forEach(h=>{h.style.height="",h.style.display=""})),s=new ce("#accordion",{duration:300,showMultiple:!0,openOnInit:[0]})}function l(){e.classList.add("is-hidden"),document.body.style.overflow="",s&&(s.destroy(),s=null,document.querySelectorAll(".ac-panel").forEach(r=>{r.style.height="",r.style.display=""}))}function i(){o++,t.textContent=o}function re(){o>1&&(o--,t.textContent=o)}function ae(){console.log(`Додано у корзину: ${o} шт.`)}function ie(r){r.preventDefault(),alert("Дякуємо за покупку")}});
//# sourceMappingURL=index.js.map
