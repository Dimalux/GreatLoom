import{a as L,S as D,N as $,P,K as te,i as oe,A as ne}from"./assets/vendor-DwraIAnb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const k="https://books-backend.p.goit.global/books";async function se(){try{const e=await L.get(`${k}/category-list`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні категорій:",e),[]}}async function N(){try{const e=await L.get(`${k}/top-books`);return console.log(e.data),e.data}catch(e){return console.error("Помилка при отриманні топу книг:",e),[]}}async function re(e){try{const t=await L.get(`${k}/category`,{params:{category:e}});return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні книг за категорією:",t),[]}}async function ie(e){try{const t=await L.get(`${k}/${e}`);return console.log(t.data),t.data}catch(t){return console.error("Помилка при отриманні інформації про книгу книги:",t),null}}const ae=document.querySelector(".burger-btn"),S=document.querySelector(".mobile-menu"),le=document.querySelector(".close-btn"),ce=document.querySelectorAll(".mobile-nav-link");ae.addEventListener("click",()=>{S.classList.add("is-open"),document.body.style.overflow="hidden"});le.addEventListener("click",()=>{S.classList.remove("is-open"),document.body.style.overflow=""});ce.forEach(e=>{e.addEventListener("click",()=>{S.classList.remove("is-open"),document.body.style.overflow=""})});const de=[{alt:"A book, sweater and a cup",mob:new URL("/GreatLoom/assets/slide-1-mob-Cc6zvtrp.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-1-mob@2x-C1Cua2dF.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-1-tab-B-iawSTV.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-1-tab@2x-BDrlqYgA.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-1-desck-B8PASKW_.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-1-desck@2x-DQD8wfpB.jpg",import.meta.url).href},{alt:"A book and glasses",mob:new URL("/GreatLoom/assets/slide-2-mob-DDbJJ4lu.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-2-mob@2x-uw3nuwm-.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-2-tab-90L-xNWz.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-2-tab@2x-BmPtjbdk.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-2-desck-C8ZwBFDl.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-2-desck@2x-ixCL5MHK.jpg",import.meta.url).href},{alt:"Bookshelves with lots of books",mob:new URL("/GreatLoom/assets/slide-3-mob-QYLd9H-Q.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-3-mob@2x-DvJp_sXF.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-3-tab-BSTLpl4t.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-3-tab@2x-DJOgWmei.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-3-desck-DIHVxR5Y.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-3-desck@2x-DBh22Oh4.jpg",import.meta.url).href},{alt:"A vase with flowers in front of white wall",mob:new URL("/GreatLoom/assets/slide-4-mob-BgWQO8Go.jpg",import.meta.url).href,mob2x:new URL("/GreatLoom/assets/slide-4-mob@2x-UXlyVfUq.jpg",import.meta.url).href,tab:new URL("/GreatLoom/assets/slide-4-tab-UGM7yKlF.jpg",import.meta.url).href,tab2x:new URL("/GreatLoom/assets/slide-4-tab@2x-r3kyjrid.jpg",import.meta.url).href,desk:new URL("/GreatLoom/assets/slide-4-desck-DRlw8fXH.jpg",import.meta.url).href,desk2x:new URL("/GreatLoom/assets/slide-4-desck@2x-D_brjqpn.jpg",import.meta.url).href}],ue=[{subtitle:"Get 10% off your first order"},{subtitle:"Save 15% on some books"},{subtitle:"Summer Sale! Up to -40% discounts"},{subtitle:"Last chance to buy our spring bestsellers"}];function me(e){const t=document.querySelector("#hero-swiper");if(!t){console.error("[Swiper] Container #hero-swiper not found!");return}const n=e.map(o=>`
        <li class="swiper-slide">
          <picture>
            <source srcset="${o.desk} 1x, ${o.desk2x} 2x" media="(min-width: 1440px)" />
            <source srcset="${o.tab} 1x, ${o.tab2x} 2x" media="(min-width: 768px)" />
            <img src="${o.mob}" srcset="${o.mob2x} 2x" alt="${o.alt}" class="hero-slide-img" loading="lazy" />
          </picture>
        </li>
      `).join("");t.innerHTML=n}function U(){const e=document.querySelector(".swiper-btn.prev"),t=document.querySelector(".swiper-btn.next");!b||!e||!t||(e.disabled=b.isBeginning,t.disabled=b.isEnd,e.classList.toggle("disabled",b.isBeginning),t.classList.toggle("disabled",b.isEnd))}function j(e){const t=document.querySelector(".hero-subtitle");if(!t)return;const n=ue[e];n&&(t.textContent=n.subtitle)}let b;window.addEventListener("DOMContentLoaded",()=>{me(de);const e=document.querySelector(".swiper-btn.next"),t=document.querySelector(".swiper-btn.prev");requestAnimationFrame(()=>{b=new D(".swiper-gallery",{modules:[$,P],slidesPerView:1,loop:!1,allowTouchMove:!0,wrapperTag:"ul",navigation:{nextEl:e,prevEl:t},on:{init:()=>{U(),j(0)},slideChange:function(){U(),j(this.activeIndex)}}})})});const C=document.getElementById("book-list"),g=document.getElementById("show-more-btn"),O=document.getElementById("showing-count"),x=document.getElementById("total-count"),w=document.querySelectorAll(".book-category-btn");let m=[],f=0,B=!0;function F(){w.forEach(e=>e.disabled=!0)}function _(){w.forEach(e=>e.disabled=!1)}function I(){g.classList.remove("book-visually-hidden")}function R(){g.classList.add("book-visually-hidden")}function q(){const e=B?window.innerWidth<768?10:24:4;m.slice(f,f+e).forEach(n=>{const o=document.createElement("li");o.classList.add("book-card"),o.innerHTML=`
      <img src="${n.book_image}" alt="${n.title}" />
      <div class="book-info">
        <h4 class="book-title">${n.title}</h4>
        <p class="book-author">${n.author}</p>
      </div>
      <p class="book-price">$${n.price??"N/A"}</p>
      <button class="book-learn-btn" data-id="${n._id}">Learn More</button>
    `,C.appendChild(o)}),f+=e,O.textContent=Math.min(f,m.length),f>=m.length&&g.classList.add("book-visually-hidden"),B=!1}async function pe(){R(),q(),I()}async function fe(e){try{g.classList.add("book-visually-hidden");const n=(await N()).find(o=>o.list_name.toLowerCase()===e.toLowerCase());if(!n){C.innerHTML="<p>No books found for this category.</p>",x.textContent=0,O.textContent=0,g.style.display="none";return}m=n.books,x.textContent=m.length,q(),f>=m.length?R():I()}catch(t){console.error("Ошибка при загрузке книг категории:",t)}}async function W(){g.classList.add("book-visually-hidden"),F();const t=(await N()).flatMap(a=>a.books),o=(await se()).map(a=>re(a.list_name)),i=(await Promise.all(o)).flat(),l=new Map;t.forEach(a=>{l.set(a._id,a)}),i.forEach(a=>{l.has(a._id)||l.set(a._id,a)}),m=Array.from(l.values()),x.textContent=m.length,q(),f>=m.length?R():I(),_()}w.forEach(e=>{e.addEventListener("click",async()=>{const t=e.getAttribute("data-category");F(),w.forEach(n=>n.classList.remove("active")),e.classList.add("active"),C.innerHTML="",f=0,B=!0,t==="all"?await W():(await fe(t),_())})});g.addEventListener("click",pe);W();const ge=new D(".feedbacks .swiper",{modules:[$,P,te],slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}},navigation:{nextEl:".feedbacks .swiper-button-next",prevEl:".feedbacks .swiper-button-prev"},pagination:{el:".feedbacks .swiper-pagination"},keyboard:{enabled:!0}});ge.on("keyPress",(e,t)=>{t===9&&e.slideNext()});const p=document.querySelectorAll(".events-item"),V=document.querySelectorAll(".events-indicator"),H=document.getElementById("prevBtn"),z=document.getElementById("nextBtn");let d=0,u=0;const Q=p.length;function y(){window.innerWidth>=768?(T(),u===0?(p[0].style.display="block",p[1]&&(p[1].style.display="block")):p[2]&&(p[2].style.display="block"),M(u),A(u,1)):(T(),p[d].style.display="block",M(d),A(d,Q-1))}function T(){p.forEach(e=>{e.style.display="none"})}function M(e){V.forEach((t,n)=>{n===e?t.classList.add("active"):t.classList.remove("active")})}function A(e,t){H.disabled=e===0,z.disabled=e===t}function J(){window.innerWidth>=768?u>0&&(u=u-1,y()):d>0&&(d=d-1,y())}function K(){window.innerWidth>=768?u<1&&(u=u+1,y()):d<Q-1&&(d=d+1,y())}function ye(e){window.innerWidth>=768?u=e:d=e,y()}H.addEventListener("click",J);z.addEventListener("click",K);V.forEach((e,t)=>{e.addEventListener("click",function(){ye(t)})});document.addEventListener("keydown",function(e){e.key==="ArrowLeft"&&J(),e.key==="ArrowRight"&&K()});window.addEventListener("resize",y);document.querySelectorAll(".events-register").forEach(function(e){e.addEventListener("click",function(){const t=this.closest(".events-item").querySelector(".events-name").textContent;be(t)})});function be(e){const t=document.getElementById("contactModal"),n=document.getElementById("modalEventName");n.textContent=e,t.classList.add("active"),document.body.style.overflow="hidden"}function v(){document.getElementById("contactModal").classList.remove("active"),document.body.style.overflow="",document.getElementById("modalForm").reset()}document.getElementById("closeModal").addEventListener("click",v);document.getElementById("contactModal").addEventListener("click",function(e){e.target===this&&v()});document.addEventListener("keydown",function(e){e.key==="Escape"&&v()});document.getElementById("modalForm").addEventListener("submit",function(e){e.preventDefault();const t=new FormData(this),n=t.get("name"),o=t.get("email"),s=t.get("message");console.log("Form submitted:",{name:n,email:o,message:s}),alert("Дякуємо за реєстрацію!"),v()});y();const Y=document.querySelector(".sub-form"),he=document.querySelector("#user-email");Y.addEventListener("submit",we);function we(e){e.preventDefault();const t=he.value.trim();if(!Le(t)){E("error","Invalid Input","Please provide a valid email address");return}const o=ke();if(ve(o,t)){E("warning","Already Subscribed","This email is already on the list"),G();return}Ee(o,t),E("success","Subscribed","You have successfully joined the list"),G()}function Le(e){return/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)}function ke(){const e=localStorage.getItem("subscriptionList");return e?JSON.parse(e):[]}function ve(e,t){return e.includes(t)}function Ee(e,t){e.push(t),localStorage.setItem("subscriptionList",JSON.stringify(e))}function E(e,t,n){oe[e]({title:t,message:n,position:"topRight"})}function G(){Y.reset()}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-backdrop"),t=document.getElementById("quantity"),n=document.querySelector(".modal-close");let o=1;if(!e||!t||!n){console.warn("Элементы модалки не найдены");return}document.addEventListener("click",r=>{const c=r.target.closest("[data-id]");if(!c)return;const h=c.dataset.id;h&&i(h)}),e.addEventListener("click",r=>{(r.target.classList.contains("modal-backdrop")||r.target.closest(".modal-close"))&&l()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&l()}),document.addEventListener("click",r=>{r.target.classList.contains("decrement")&&X(),r.target.classList.contains("increment")&&a(),r.target.classList.contains("add-to-cart")&&Z(),r.target.classList.contains("buy-now")&&ee(r)});let s=null;async function i(r){const c=await ie(r);if(!c){console.warn("Нет данных по книге");return}document.getElementById("modal-title").textContent=c.title,document.getElementById("modal-author").textContent=c.author,document.getElementById("modal-price").textContent=`$${c.price}`,document.getElementById("modal-book-image").src=c.book_image,document.getElementById("modal-book-image").alt=c.title,document.getElementById("details-text").textContent=c.description||"No description",document.getElementById("shipping-text").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.getElementById("returns-text").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",t.textContent=1,o=1,e.classList.remove("is-hidden"),document.body.style.overflow="hidden",s&&(s.destroy(),document.querySelectorAll(".ac-panel").forEach(h=>{h.style.height="",h.style.display=""})),s=new ne("#accordion",{duration:300,showMultiple:!0,openOnInit:[0]})}function l(){e.classList.add("is-hidden"),document.body.style.overflow="",s&&(s.destroy(),s=null,document.querySelectorAll(".ac-panel").forEach(r=>{r.style.height="",r.style.display=""}))}function a(){o++,t.textContent=o}function X(){o>1&&(o--,t.textContent=o)}function Z(){console.log(`Додано у корзину: ${o} шт.`)}function ee(r){r.preventDefault(),alert("Дякуємо за покупку")}});
//# sourceMappingURL=index.js.map
